<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>GuitarTabModelLoader.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">GuitarTabLanguage</a> &gt; <a href="index.source.html" class="el_package">guitartab._symboltable</a> &gt; <span class="el_source">GuitarTabModelLoader.java</span></div><h1>GuitarTabModelLoader.java</h1><pre class="source lang-java linenums">/* generated from model GuitarTab */
/* generated by template core.Class*/

/* (c) https://github.com/MontiCore/monticore */
package guitartab._symboltable;

/* generated by template core.Imports*/

import java.util.*;
import java.util.function.*;
import java.util.stream.Stream;
import de.se_rwth.commons.logging.Log;
import de.monticore.ast.ASTNode;
import de.monticore.ast.Comment;
import de.se_rwth.commons.SourcePosition;
import de.monticore.symboltable.*;
import de.monticore.ast.ASTCNode;


 public  class GuitarTabModelLoader  implements de.monticore.modelloader.IModelLoader&lt;guitartab._ast.ASTTab,guitartab._symboltable.IGuitarTabGlobalScope&gt; {

    /* generated by template core.Attribute*/
 protected  final  guitartab._symboltable.GuitarTabLanguage modelingLanguage ;

    /* generated by template core.Attribute*/
 protected  de.monticore.modelloader.AstProvider&lt;guitartab._ast.ASTTab&gt; astProvider ;


    /* generated by template core.Constructor*/
<span class="nc" id="L30"> public  GuitarTabModelLoader(guitartab._symboltable.GuitarTabLanguage language)  {</span>
    /* generated by template _symboltable.modelloader.Constructor*/
<span class="nc" id="L32">  this.modelingLanguage = language;</span>
<span class="nc" id="L33">  this.astProvider = new de.monticore.modelloader.ParserBasedAstProvider&lt;&gt;(language);</span>
<span class="nc" id="L34">}</span>


    /* generated by template core.Method*/
 public  guitartab._symboltable.GuitarTabLanguage getModelingLanguage ()  {
      /* generated by template methods.Get*/

<span class="nc" id="L41">return this.modelingLanguage;</span>

}

    /* generated by template core.Method*/
 public  void createSymbolTableFromAST (guitartab._ast.ASTTab ast,String modelName,guitartab._symboltable.IGuitarTabGlobalScope enclosingScope)  {
      /* generated by template _symboltable.modelloader.CreateSymbolTableFromAST*/

<span class="nc" id="L49">  final guitartab._symboltable.GuitarTabSymbolTableCreatorDelegator symbolTableCreator =</span>
<span class="nc" id="L50">        getModelingLanguage().getSymbolTableCreator(enclosingScope);</span>

<span class="nc bnc" id="L52" title="All 2 branches missed.">  if (symbolTableCreator != null) {</span>
<span class="nc" id="L53">    Log.debug(&quot;Start creation of symbol table for model \&quot;&quot; + modelName + &quot;\&quot;.&quot;,</span>
<span class="nc" id="L54">    GuitarTabModelLoader.class.getSimpleName());</span>
<span class="nc" id="L55">    final guitartab._symboltable.IGuitarTabScope scope = symbolTableCreator.createFromAST(ast);</span>

<span class="nc bnc" id="L57" title="All 2 branches missed.">    if (!(scope instanceof guitartab._symboltable.GuitarTabArtifactScope)) {</span>
<span class="nc" id="L58">      Log.warn(&quot;0xA7001x050 Top scope of model &quot; + modelName + &quot; is expected to be an artifact scope, but&quot;</span>
<span class="nc bnc" id="L59" title="All 2 branches missed.">                + &quot; is scope \&quot;&quot; + (scope.isPresentName() ? scope.getName() : &quot;&quot;) + &quot;\&quot;&quot;);</span>
    }

<span class="nc" id="L62">    Log.debug(&quot;Created symbol table for model \&quot;&quot; + modelName + &quot;\&quot;.&quot;, GuitarTabModelLoader.class.getSimpleName());</span>
<span class="nc" id="L63">  }</span>
  else {
<span class="nc" id="L65">    Log.warn(&quot;0xA7002x050 No symbol created, because '&quot; + getModelingLanguage().getName()</span>
              + &quot;' does not define a symbol table creator.&quot;);
  }
<span class="nc" id="L68">}</span>

    /* generated by template core.Method*/
 public  List&lt;guitartab._ast.ASTTab&gt; loadModelsIntoScope (String qualifiedModelName,de.monticore.io.paths.ModelPath modelPath,guitartab._symboltable.IGuitarTabGlobalScope enclosingScope)  {
      /* generated by template _symboltable.modelloader.LoadModelsIntoScope*/

<span class="nc bnc" id="L74" title="All 2 branches missed.">  if (!loadSymbolsIntoScope(qualifiedModelName, modelPath, enclosingScope)) {</span>
<span class="nc" id="L75">    final List&lt;guitartab._ast.ASTTab&gt; asts = loadModels(qualifiedModelName, modelPath);</span>
<span class="nc bnc" id="L76" title="All 2 branches missed.">    for (guitartab._ast.ASTTab ast : asts) {</span>
<span class="nc" id="L77">      createSymbolTableFromAST(ast, qualifiedModelName, enclosingScope);</span>
<span class="nc" id="L78">    }</span>
<span class="nc" id="L79">    showWarningIfParsedModels(asts, qualifiedModelName);</span>
<span class="nc" id="L80">    return asts;</span>
  }
<span class="nc" id="L82">  return new ArrayList&lt;&gt;();</span>
}

    /* generated by template core.Method*/
 public  List&lt;guitartab._ast.ASTTab&gt; loadModels (String qualifiedModelName,de.monticore.io.paths.ModelPath modelPath)  {
      /* generated by template _symboltable.modelloader.LoadModels*/

<span class="nc bnc" id="L89" title="All 2 branches missed.">  com.google.common.base.Preconditions.checkArgument(!com.google.common.base.Strings.isNullOrEmpty(qualifiedModelName));</span>

<span class="nc" id="L91">  final List&lt;guitartab._ast.ASTTab&gt; foundModels = new ArrayList&lt;&gt;();</span>

<span class="nc" id="L93">  final de.monticore.io.paths.ModelCoordinate resolvedCoordinate = resolve(qualifiedModelName, modelPath);</span>
<span class="nc bnc" id="L94" title="All 2 branches missed.">  if (resolvedCoordinate.hasLocation()) {</span>
<span class="nc" id="L95">    final guitartab._ast.ASTTab ast = astProvider.getRootNode(resolvedCoordinate);</span>
<span class="nc" id="L96">    de.monticore.generating.templateengine.reporting.Reporting.reportOpenInputFile(Optional.of(resolvedCoordinate.getParentDirectoryPath()),</span>
<span class="nc" id="L97">    resolvedCoordinate.getQualifiedPath());</span>
<span class="nc" id="L98">    foundModels.add(ast);</span>
  }

<span class="nc" id="L101">  return foundModels;</span>
}

    /* generated by template core.Method*/
 public  boolean loadSymbolsIntoScope (String qualifiedModelName,de.monticore.io.paths.ModelPath modelPath,guitartab._symboltable.IGuitarTabGlobalScope enclosingScope)  {
      /* generated by template _symboltable.modelloader.LoadSymbolsIntoScope*/

<span class="nc" id="L108">  final de.monticore.io.paths.ModelCoordinate resolvedCoordinate = resolveSymbol(qualifiedModelName, modelPath);</span>
<span class="nc bnc" id="L109" title="All 2 branches missed.">  if (resolvedCoordinate.hasLocation()) {</span>
<span class="nc" id="L110">    guitartab._symboltable.IGuitarTabScope deser  = new guitartab._symboltable.serialization.GuitarTabScopeDeSer().load(resolvedCoordinate.getLocation(), enclosingScope);</span>
<span class="nc" id="L111">    enclosingScope.addSubScope(deser);</span>
<span class="nc" id="L112">    return true;</span>
  }
<span class="nc" id="L114">  return false;</span>
}

    /* generated by template core.Method*/
 private  de.monticore.io.paths.ModelCoordinate resolve (String qualifiedModelName,de.monticore.io.paths.ModelPath modelPath)  {
      /* generated by template _symboltable.modelloader.Resolve*/
<span class="nc" id="L120">  String simpleName = de.monticore.utils.Names.getSimpleName(qualifiedModelName);</span>
<span class="nc" id="L121">  java.nio.file.Path qualifiedPath = java.nio.file.Paths.get(</span>
<span class="nc" id="L122">  de.monticore.utils.Names.getPathFromQualifiedName(qualifiedModelName)).resolve(</span>
<span class="nc" id="L123">      simpleName + &quot;.&quot; + getModelingLanguage().getFileExtension());</span>
<span class="nc" id="L124">  de.monticore.io.paths.ModelCoordinate qualifiedModel = de.monticore.io.paths.ModelCoordinates.createQualifiedCoordinate(qualifiedPath);</span>

<span class="nc" id="L126">  return modelPath.resolveModel(qualifiedModel);</span>
}

    /* generated by template core.Method*/
 protected  de.monticore.io.paths.ModelCoordinate resolveSymbol (String qualifiedModelName,de.monticore.io.paths.ModelPath modelPath)  {
      /* generated by template _symboltable.modelloader.ResolveSymbol*/
<span class="nc" id="L132">  String simpleName = de.monticore.utils.Names.getSimpleName(qualifiedModelName);</span>
<span class="nc" id="L133">  java.nio.file.Path qualifiedPath = java.nio.file.Paths.get(</span>
<span class="nc" id="L134">            de.monticore.utils.Names.getPathFromQualifiedName(qualifiedModelName)).resolve(</span>
<span class="nc" id="L135">            simpleName + &quot;.&quot; + getModelingLanguage().getSymbolFileExtension());</span>
<span class="nc" id="L136">  de.monticore.io.paths.ModelCoordinate qualifiedModel = de.monticore.io.paths.ModelCoordinates.createQualifiedCoordinate(qualifiedPath);</span>

<span class="nc" id="L138">  return modelPath.resolveModel(qualifiedModel);</span>
}

    /* generated by template core.Method*/
 protected  void showWarningIfParsedModels (List&lt;?&gt; asts,String modelName)  {
      /* generated by template _symboltable.modelloader.ShowWarningIfParsedModels*/
<span class="nc bnc" id="L144" title="All 2 branches missed.">  if(!asts.isEmpty()) {</span>
<span class="nc" id="L145">    Log.warn(&quot;Symbol for model \&quot;&quot;+modelName+&quot;\&quot; found in a model file that has not been translated yet. This works for compatibility reasons, but is deprecated and will be removed soon. Please adjust your building process.&quot;);</span>
  }
<span class="nc" id="L147">}</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.2.201808211720</span></div></body></html>